<!DOCTYPE html>
<!-- This html will have a similar layout with all pages to create a uniform look and feel -->
<html lang="en">
	<head>
	  <meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8">
		<title>Projects - Marc B</title>
		<link rel="stylesheet" href="style.css" />
		<link rel="stylesheet" href="lightstyle.css" /> <!--light mode style sheet-->
		<style>

			/* add space to the bottom of pod, low content */
			.pod3{

				padding-bottom:5%;
			}
			
			/* https://www.w3schools.com/css/tryit.asp?filename=trycss_image_gallery
			Utilized the w3 schools example of gallery, kept most settings as it fit well with the layout, adjusted colors
			*/
			div.gallery {
				margin: 30px;
				border: none;
				float: left;
				width: 180px;
			}

			div.gallery:hover {
				border: 1px solid #FFEB00;
			}

			div.gallery img {
				width: 100%;
				height: auto;
			}

			div.desc {
				padding: 15px;
				text-align: center;
			}
		</style>
	</head>
	<body>
		<!-- Div below with CSS style pod1 applied, and id "logo" which is used by javascript to insert the html code defined in the .js file -->
		<div class="pod1" id="logo"></div>
		
		<div class="pod2">
			
			<!-- nav element with id "navi" which is used by javascript to insert navigation html code defined in the .js file -->
			<nav class="nav" id="navi"></nav>
			
			<div class="pod3">
				<h1>Self Hosted Truenas on Proxmox</h1>
				<article style="margin-left:5%; margin-right: 5%;">
					<h2>The Problem - Storage</h2>
					<p>The sizes of files (especially multimedia) are becoming larger, and similarly out multimedia memories and documents are forever growing, however reliable, accessible storage space are not getting cheaper in today's economy, if not it is getting more expensive and options for unlimited cloud storage are trending to become less popular as organization leverage consumers dependancies on storage.</p><br>
					<p>The scope of this project will be to build an open source Network Attach Storage (NAS). This NAS will provide self hosted storage services locally with the option to expand into a self hosted cloud. This project will demonstrate the ability to use older computer hardware and put them to use to add free storage space for a home user.</p><br>
					
					<h2>The hardware: Dell Optiplex 7060</h2>
					<ul>
						<li>Intel Core i5-8500</li>
						<li>16GB DDR4 RAM</li>
						<li>256 NVMe SSD</li>
						<li>500GB SSD</li>
						<li>6 USB Port (4 USB 3.1)</li>
					</ul>
					
					<img src="images/dell.jpg" alt="Dell Hardware for NAS" width="60%" height="auto">
					
					<h2>The Virtual Environment: Proxmox OS</h2>
					<p>Proxmox is an open source virtual environment very popular in the open source community and will be used to virtualize TrueNas OS (More on this later) which will provide us the file serving features.</p>
					
					<p>For the scope of this project, virtulizing truenas helps with expandability and flexibility. 1 such example is intial deployment of a Truenas instance (VM) does not require a hard restart, this restart is virtualized in proxmox. The same can be said for any hardware devices Truenas sees, it is all virtualized and for the most part can be hot swapped.</p>
					
					<img src="images/project2b.png" alt="Proxmox OS Dashboard Screenshot" width="60%" height="auto">
					
					<h2>Truenas - the Virtual Machine</h2>
					
					<p>Truenas scale is an open source operating system based on Debian Linux. It utilizes ZFS storage protocol which in production environments have proven to be effective at being reliable, accessible and safe data storage system.</p>
					
					<img src="images/project2c.png" alt="Truenas OS Dashboard Screenshot" width="60%" height="auto">
					
					<p>Truenas provides all the basic features a home user will need for a local network attached storage with additional options to have containerized applications. With a fully functioning Truenas, all devices on a home LAN can connect and share files. Truenas has a host of features that can then run periodic backups of the files that are in its storage. It also has version control built in, great for collaboration!</p>
					
				</article>
			</div>
		</div>
		
		<!-- javascript will use the id of the footer element to insert the footer content located in the .js file -->
		<footer id="foot"></footer>
		
		<!-- 
		Script below enables access the CSS classes and apply the light-mode class styles when the function is called. To keep light mode persistent through pages, we will need to store the current mode locally on the device and add a listner event for the script to apply the current mode of the file
		-->
		<script>
			//Make javascript aware of the page current theme mode, variable lightActive will store a boolean value if light mode is active or not when the user clicks the html id light-dark-button. This will be used later on in the script
			function lightdark() {
				const lightActive = document.body.classList.toggle("light-mode");
				// Update text in nav button to reflect the theme mode based on the boolean value of lightActive. If true, Dark mode text will display otherwise Light mode text.
				if (lightActive) {
					document.getElementById("light-dark-button").innerHTML = "Dark Mode";
					//Session storage method is used to store on the local device "pagetheme" variable to be used as an indicator that the user prefers light mode or dark. This can be used to keep the page theme when going through pages. pagetheme will have light or dark values which will store for only the current session
					sessionStorage.setItem("pagetheme", "light")
				} else {
					document.getElementById("light-dark-button").innerHTML = "Light Mode";
					sessionStorage.setItem("pagetheme", "dark")
				}
			}

			// Event listner for DOM which will wait for the html document to load and then runs a fetch method to insert the header (logo and navigation) and the footer. It will then apply light mode to the elements based on the value of the sessionStorage pageTheme variable stored.
			window.addEventListener("DOMContentLoaded", () => {
		
				// The promise all method was utilized from MDM webdocs, link below. This method ensures the logo, nav and footer is inserted into the document, before reading the sessionStorage pagetheme variable to determine if the page is in light mode. This helps maintain light mode if selected when navigating through the website. It orders the way the script is run, to ensure the html elements are in the document before applying a style.
				//https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all
				Promise.all([
					fetch('https://mbissessar.github.io/itec/footer.html')
						.then(response => response.text())
						.then(html => {
							document.getElementById('foot').innerHTML = html;
						}),

					fetch('https://mbissessar.github.io/itec/logo.html')
						.then(response => response.text())
						.then(html => {
							document.getElementById('logo').innerHTML = html;
						}),

					fetch('https://mbissessar.github.io/itec/nav.html')
						.then(response => response.text())
						.then(html => {
							document.getElementById('navi').innerHTML = html;
						})
				])
				.then(() => {
					// With all html elements loaded above, check for the variable in sessionStorage called pagetheme, and apply the light theme is value light is found. If light is also found in the sessionStorage, the text will show dark mode in the nav a link style button.
					const savedtheme = sessionStorage.getItem("pagetheme");

					if (savedtheme === "light") {
						document.body.classList.add("light-mode");
						const lightDarkButton = document.getElementById("light-dark-button");
							lightDarkButton.innerHTML = "Dark Mode";
					}
			});
		});
		</script>
	</body>
</html>
